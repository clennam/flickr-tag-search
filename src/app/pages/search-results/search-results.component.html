<div class="container-fluid">
    <div class="row py-3 mb-2 bg-dark">
        <app-search-bar [searchTerm]="searchTerm" [view]='"minimised"'></app-search-bar>
    </div>
    <div class="input-group w-100 pb-2">
        <div class="form-check form-switch mx-auto" *ngIf="imageResults.items?.length > 0">
            <input class="form-check-input rounded-pill" type="checkbox" role="switch" id="flexSwitchCheckDefault"
                [(ngModel)]="hiRes" (change)="changeResolution()">
            <label class="form-check-label" for="flexSwitchCheckDefault">Retrieve high resolution
                images</label>
        </div>
        <div class="mx-auto fs-2 text-primary" *ngIf="isLoading">Please wait...</div>
        <div class="mx-auto fs-2 text-primary" *ngIf="!(imageResults.items?.length > 0) && !isLoading">
            Your search didn't return any results.
        </div>
    </div>
    <ng-container *ngIf="imageResults.items?.length > 0">
        <div class="d-none d-lg-flex flex-row w-100 pb-5">
            <div class="d-flex flex-column w-25">
                <img *ngFor="let item of imageResults?.items.slice(0,4);" [src]="item.media.m" class="img-fluid p-1"
                    (click)="openImgModal(item)">
            </div>
            <div class="d-flex flex-column w-25">
                <img *ngFor="let item of imageResults?.items.slice(5,9);" [src]="item.media.m" class="img-fluid p-1"
                    (click)="openImgModal(item)">
            </div>
            <div class="d-flex flex-column w-25">
                <img *ngFor="let item of imageResults?.items.slice(10,14);" [src]="item.media.m" class="img-fluid p-1"
                    (click)="openImgModal(item)">
            </div>
            <div class="d-flex flex-column w-25">
                <img *ngFor="let item of imageResults?.items.slice(15,19);" [src]="item.media.m" class="img-fluid p-1"
                    (click)="openImgModal(item)">
            </div>
        </div>
        <div class="d-none d-md-flex d-lg-none flex-row w-100 pb-5">
            <div class="d-flex flex-column w-50">
                <img *ngFor="let item of imageResults?.items.slice(0,9);" [src]="item.media.m" class="img-fluid p-1"
                    (click)="openImgModal(item)">
            </div>
            <div class="d-flex flex-column w-50">
                <img *ngFor="let item of imageResults?.items.slice(10,19);" [src]="item.media.m" class="img-fluid p-1"
                    (click)="openImgModal(item)">
            </div>
        </div>
        <div class="d-flex d-md-none flex-row w-100 pb-5">
            <div class="d-flex flex-column w-100">
                <img *ngFor="let item of imageResults?.items;" [src]="item.media.m" class="img-fluid p-1"
                    (click)="openImgModal(item)">
            </div>
        </div>
    </ng-container>
</div>

<a class="d-none d-md-block position-absolute top-0 start-0 fs-1 text-light p-3" routerLink="/search">
    <i class="bi bi-arrow-left"></i>
</a>

<app-view-modal [modalId]="imgModalId"></app-view-modal>